<div class="top-bar">
    <div class="top-bar-left">
        <ul class="menu">
            <li class="menu-text">{{title}}</li>
        </ul>
    </div>
</div>

<div class="row columns" style="padding-top: 1rem">

    <div *ngIf="status" class="callout secondary">
        <h5>
            <span *ngIf="status === 'SCANNING'">Scanning for devices</span>
            <span *ngIf="status === 'SENSORTAG_FOUND'">Found a Sensor</span>
            <span *ngIf="status === 'DEVICE_INFO_AVAILABLE'">Connected to Sensor</span>
        </h5>
    </div>

    <button *ngIf="status !== 'SCANNING' && status !== 'DEVICE_INFO_AVAILABLE'" (click)="connectToNearestDevice()" class="expanded large button">
        Add a Sensor
    </button>


    <div *ngFor="#device of connectedDevices; #i = index">
        <div *ngIf="device.isNamed === false" class="row columns">
            <div class="input-group">
                <input class="input-group-field" type="text" placeholder="Sensor name" [(ngModel)]="device.name" />
                <div class="input-group-button">
                    <input type="submit" class="button" value="Submit" (click)="nameDevice(device, device.name)">
                </div>
            </div>
            <p class="help-text" id="passwordHelpText">Enter a name to identify this sensor. You can use the location of the sensor, etc</p>
        </div>

        <div *ngIf="device.isNamed === true" class="callout">
            <h4>{{device.name}}</h4>
            <div>Address {{device.address}}</div>
            <div>Status: {{device.status}}</div>
            <div *ngIf="device.data.humidityData">
                <h5>Humidity Data: </h5>
                <div>
                    {{device.data.humidityData.humidityTemperature}} C
                </div>
                <div>
                    {{device.data.humidityData.humidityTemperatureFahrenheit}} F
                </div>
                <div>
                    {{device.data.humidityData.relativeHumidity}}% humidity
                </div>
            </div>

            <div class="button-group">
                <button (click)="disconnectFromDevice(i)" class="button secondary">Disconnect</button>
                <button (click)="device.isNamed = false" class="button secondary">Rename</button>
            </div>
        </div>
    </div>
</div>